<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>台灣郵局存證信函產生器</title>

    <meta name="description" content="台灣郵局存證信函產生器">
    <meta name="author" content="黑田">

    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">

  </head>
  <body>

    <div class="container-fluid">
	<div class="row p-3">
		<div class="col-md-12 text-center">
			<h3>
				台灣郵局存證信函產生器
			</h3>
		</div>
	</div>
	<div class="row p-3">
		
		<div class="col-md-4 ">
			<h6 class="inline">
				寄件人資訊
			</h6> 
			<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#adressModal" data-bs-whatever="寄件人">新增</button>
		</div>
		<div class="col-md-4 ">
			<h6 class="inline">
				收件人資訊
			</h6> 
			<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#adressModal" data-bs-whatever="收件人">新增</button>
		</div>
		<div class="col-md-4 ">
			<h6 class="inline">
				副本收件人資訊
			</h6> 
			<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#adressModal" data-bs-whatever="副本地址">新增</button>
		</div>
	</div>
	<div class="row p-3">

		<div class="col-md-12 ">

			<button type="button" class="btn btn-warning" id="clear">
				清除內文
			</button>
			<form role="form">
				<div class="form-group">
					 
					<label for="letter_content">
						內文
					</label>
					<textarea class="form-control" id="letter_content"></textarea>
					
				</div>				
				<button type="submit" class="btn btn-primary">
					產生
				</button>
			</form>
		</div>
	</div>

	<div class="row p-3">
		<div class="modal fade" id="adressModal" tabindex="-1" aria-labelledby="adressModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="adressModalLabel">新增地址資訊</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form>
				<div class="mb-3">
					<label for="name" class="col-form-label">姓名或單位名稱:</label>
					<input type="text" class="form-control" id="name">
				</div>
				<div class="mb-3">
					<label for="address" class="col-form-label">地址:</label>
					<textarea class="form-control" id="address"></textarea>
				</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
				<button type="button" class="btn btn-primary"  data-bs-dismiss="modal"  id="submit">新增</button>
			</div>
			</div>
		</div>
		</div>
	</div>
	
</div>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/scripts.js"></script>
	<script> 


		// 定义三个对象来分别存储不同类型的地址和计数器
		var fromAddressData = {
			addresses: [],
			counter: 1
		};

		var toAddressData = {
			addresses: [],
			counter: 1
		};

		var copyAddressData = {
			addresses: [],
			counter: 1
		};
		var type_now = ''

		var adressModal = document.getElementById('adressModal')
		adressModal.addEventListener('show.bs.modal', function (event) {
			var button = event.relatedTarget
			var type = button.getAttribute('data-bs-whatever')
			type_now = type
			var modalTitle = adressModal.querySelector('.modal-title')
			var modalBodyInput = adressModal.querySelector('.modal-body input')
			modalTitle.textContent = '編輯'+type+'資訊'
		})
		var clear_btn = document.getElementById('clear')
		clear_btn.addEventListener('click', function (event) {
			var letter_content = document.getElementById('letter_content')
			letter_content.value = ''
		})


		var submit_btn = document.getElementById('submit')
		submit_btn.addEventListener('click', function (event) {
			console.log(type_now)
			// addAddress(type_now)
		})

		function addAddress(type) {
			var nameInput = document.getElementById('name');
			var addressInput = document.getElementById('address');
		
			var name = nameInput.value;
			var address = addressInput.value;
		
			var addressInfo = {
				id: type === 'from' ? fromAddressData.counter : (type === 'to' ? toAddressData.counter : copyAddressData.counter),
				name: name,
				address: address
			};
		
			// 根据类型将地址信息存储在相应的数组中
			if (type === '寄件人') {
				fromAddressData.addresses.push(addressInfo);
				fromAddressData.counter++;
			} else if (type === '收件人') {
				toAddressData.addresses.push(addressInfo);
				toAddressData.counter++;
			} else if (type === '副本地址') {
				copyAddressData.addresses.push(addressInfo);
				copyAddressData.counter++;
			}
		

			nameInput.value = '';
			addressInput.value = '';
		
			
		}
		
	</script>
	
  </body>
</html>